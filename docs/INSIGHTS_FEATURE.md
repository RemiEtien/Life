# Lifeline Insights Feature

## ะะฑะทะพั

ะคัะฝะบัะธั **Streak & Progress Insights** ะทะฐะผะตะฝัะตั ััะฐัะธัะตัะบะธะน ะธะฝะดะธะบะฐัะพั "Calculating..." ะฝะฐ ะดะธะฝะฐะผะธัะตัะบะธะต, ะฒัะฐัะฐััะธะตัั ะธะฝัะฐะนัั, ะบะพัะพััะต ะผะพัะธะฒะธัััั ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะธ ะฟะพะบะฐะทัะฒะฐัั ะธั ะฟัะพะณัะตัั.

## ะฅะฐัะฐะบัะตัะธััะธะบะธ

### ๐ฅ ะัะฝะพะฒะฝัะต ะธะฝัะฐะนัั

1. **ะกะตัะธั ะดะฝะตะน (Streak)** - ะะพะบะฐะทัะฒะฐะตั ะบะพะปะธัะตััะฒะพ ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝัั ะดะฝะตะน ั ะฒะพัะฟะพะผะธะฝะฐะฝะธัะผะธ
2. **ะะพัะฟะพะผะธะฝะฐะฝะธั ะผะตัััะฐ** - ะะพะปะธัะตััะฒะพ ะฒะพัะฟะพะผะธะฝะฐะฝะธะน ะฒ ัะตะบััะตะผ ะผะตัััะต
3. **ะะพัะฟะพะผะธะฝะฐะฝะธั ะฝะตะดะตะปะธ** - ะะพะปะธัะตััะฒะพ ะฝะพะฒัั ะฒะพัะฟะพะผะธะฝะฐะฝะธะน ะทะฐ ะฟะพัะปะตะดะฝะธะต 7 ะดะฝะตะน
4. **ะะตัะปะตะบัะธะธ** - ะะพะปะธัะตััะฒะพ ะฒะพัะฟะพะผะธะฝะฐะฝะธะน ั ัะฐะทะผััะปะตะฝะธัะผะธ
5. **ะคะพัะพะณัะฐัะธะธ** - ะะฑัะตะต ะบะพะปะธัะตััะฒะพ ะฟัะธะบัะตะฟะปะตะฝะฝัั ัะพัะพะณัะฐัะธะน
6. **ะัะดะธะพะทะฐะผะตัะบะธ** - ะะฑัะตะต ะบะพะปะธัะตััะฒะพ ะฐัะดะธะพะทะฐะผะตัะพะบ
7. **ะัะฒะฐั ะฒัะตะผะตะฝะธ** - ะกะบะพะปัะบะพ ะปะตั ะพัะฒะฐััะฒะฐะตั timeline
8. **ะัะตะณะพ ะผะพะผะตะฝัะพะฒ** - ะะฑัะตะต ะบะพะปะธัะตััะฒะพ ัะพััะฐะฝะตะฝะฝัั ะฒะพัะฟะพะผะธะฝะฐะฝะธะน (ะพั 10+)
9. **ะญะผะพัะธะพะฝะฐะปัะฝัะน ะฑะฐะปะฐะฝั** - ะะฝะฐะปะธะท ะฟัะตะพะฑะปะฐะดะฐััะธั ัะผะพัะธะน

### ๐ฏ ะัะธะพัะธัะตัั

ะะฝัะฐะนัั ะพัะพะฑัะฐะถะฐัััั ั ะฟัะธะพัะธัะตัะพะผ (ะพั ะฒััะพะบะพะณะพ ะบ ะฝะธะทะบะพะผั):

| ะัะธะพัะธัะตั | ะะฝัะฐะนั | ะฃัะปะพะฒะธะต |
|-----------|--------|---------|
| 100 | ะกะตัะธั ะดะฝะตะน | streak > 0 |
| 50 | ะะพัะฟะพะผะธะฝะฐะฝะธั ะผะตัััะฐ | thisMonthCount > 0 |
| 45 | ะะพัะฟะพะผะธะฝะฐะฝะธั ะฝะตะดะตะปะธ | thisWeekCount > 0 |
| 40 | ะะตัะปะตะบัะธะธ | reflectionCount > 0 |
| 35 | ะคะพัะพะณัะฐัะธะธ | photoCount > 0 |
| 33 | ะัะดะธะพะทะฐะผะตัะบะธ | audioCount > 0 |
| 30 | ะัะฒะฐั ะฒัะตะผะตะฝะธ | years > 0 |
| 25 | ะัะตะณะพ ะผะพะผะตะฝัะพะฒ | memories.length >= 10 |
| 20 | ะญะผะพัะธะพะฝะฐะปัะฝัะน ะฑะฐะปะฐะฝั | memoriesWithEmotions > 5 |

### ๐ ะะพัะฐัะธั

- ะะฝัะฐะนัั ะฒัะฐัะฐัััั ะบะฐะถะดัะน ัะฐั
- ะัะฟะพะปัะทัะตััั ัะพัะผัะปะฐ: `hourOfDay % insights.length`
- ะัะธะพัะธัะตั ัะพััะฐะฝัะตััั: ะฒััะพะบะพะฟัะธะพัะธัะตัะฝัะต ะธะฝัะฐะนัั ะฟะพัะฒะปััััั ัะฐัะต

### ๐ฑ UX ะฟะพะฒะตะดะตะฝะธะต

- **ะะพ ะฒัะตะผั ัะธะฝััะพะฝะธะทะฐัะธะธ**: ะะพะบะฐะทัะฒะฐัััั ััะฐัััั ัะธะฝััะพะฝะธะทะฐัะธะธ
- **ะะพัะปะต ัะธะฝััะพะฝะธะทะฐัะธะธ**: ะะพะบะฐะทัะฒะฐัััั ะธะฝัะฐะนัั
- **ะะปั ะฝะพะฒัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน**: "โ๏ธ ะะฐัะฝะธัะต ัะฒะพะต ะฟััะตัะตััะฒะธะต"
- **Fallback**: "๐ช ะกะพะทะดะฐะนัะต ัะตัะธั"

## ะะพะบะฐะปะธะทะฐัะธั

ะคัะฝะบัะธั ะฟะพะดะดะตัะถะธะฒะฐะตั 9 ัะทัะบะพะฒ:
- ๐ฌ๐ง English
- ๐ท๐บ ะัััะบะธะน
- ๐ฉ๐ช Deutsch
- ๐ซ๐ท Franรงais
- ๐ช๐ธ Espaรฑol
- ๐ต๐น Portuguรชs
- ๐จ๐ณ ไธญๆ
- ๐ธ๐ฆ ุงูุนุฑุจูุฉ
- ๐ฎ๐ฑ ืขืืจืืช

### ะะปััะธ ะปะพะบะฐะปะธะทะฐัะธะธ

```dart
lifelineInsightStreakDays(int count)
lifelineInsightMemoriesThisMonth(int count)
lifelineInsightMemoriesThisWeek(int count)
lifelineInsightReflectionsCount(int count)
lifelineInsightPhotosCount(int count)
lifelineInsightAudioCount(int count)
lifelineInsightSpanningYears(int years)
lifelineInsightTotalMemories(int count)
lifelineInsightPositiveVibes
lifelineInsightGrowthJourney
lifelineInsightBalancedEmotions
lifelineInsightStartJourney
lifelineInsightBuildStreak
```

## ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

### ะะฐััะตั ัะตัะธะธ (Streak)

```dart
int _calculateStreak(List<Memory> memories) {
  // 1. ะะพะปััะธัั ัะฝะธะบะฐะปัะฝัะต ะดะฐัั (ะฝะพัะผะฐะปะธะทะพะฒะฐะฝะฝัะต ะบ ะดะฝัะผ)
  // 2. ะัะพะฒะตัะธัั, ะตััั ะปะธ ะฒะพัะฟะพะผะธะฝะฐะฝะธะต ัะตะณะพะดะฝั ะธะปะธ ะฒัะตัะฐ
  // 3. ะัะปะธ ะฝะตั - ัะตัะธั ะฟัะตัะฒะฐะฝะฐ (return 0)
  // 4. ะะพะดััะธัะฐัั ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝัะต ะดะฝะธ
  // 5. ะัะตัะฒะฐัั ะฟะพะดััะตั ะฟัะธ ะพะฑะฝะฐััะถะตะฝะธะธ ะฟัะพะฟััะบะฐ
}
```

**ะัะธะผะตัั:**
- ะะพัะฟะพะผะธะฝะฐะฝะธั: ัะตะณะพะดะฝั, ะฒัะตัะฐ, ะฟะพะทะฐะฒัะตัะฐ โ ะกะตัะธั: 3
- ะะพัะฟะพะผะธะฝะฐะฝะธั: ัะตะณะพะดะฝั, ะฒัะตัะฐ, [ะฟัะพะฟััะบ], 4 ะดะฝั ะฝะฐะทะฐะด โ ะกะตัะธั: 2
- ะะพัะปะตะดะฝะตะต ะฒะพัะฟะพะผะธะฝะฐะฝะธะต 3 ะดะฝั ะฝะฐะทะฐะด โ ะกะตัะธั: 0 (ะฟัะตัะฒะฐะฝะฐ)

### ะะฐััะตั ะพัะฒะฐัะฐ ะฒัะตะผะตะฝะธ

```dart
int _calculateTimelineSpan(List<Memory> memories) {
  // 1. ะะฐะนัะธ ัะฐะผัั ัะฐะฝะฝัั ะดะฐัั
  // 2. ะะฐะนัะธ ัะฐะผัั ะฟะพะทะดะฝัั ะดะฐัั
  // 3. ะััะธัะปะธัั ัะฐะทะฝะธัั ะฒ ะณะพะดะฐั
  // 4. ะะตัะฝััั 0 ะตัะปะธ < 2 ะฒะพัะฟะพะผะธะฝะฐะฝะธะน
}
```

### ะญะผะพัะธะพะฝะฐะปัะฝัะน ะฑะฐะปะฐะฝั

ะขัะตะฑัะตััั ะผะธะฝะธะผัะผ 5 ะฒะพัะฟะพะผะธะฝะฐะฝะธะน ั ัะผะพัะธัะผะธ.

```dart
if (avgValence > 0.3)  โ "๐ ะ ะพัะฝะพะฒะฝะพะผ ะฟะพะทะธัะธะฒะฝัะต ัะผะพัะธะธ"
if (avgValence < -0.3) โ "๐ฑ ะััั ัะพััะฐ"
else                   โ "โ๏ธ ะกะฑะฐะปะฐะฝัะธัะพะฒะฐะฝะฝัะต ัะผะพัะธะธ"
```

## ะขะตััะธัะพะฒะฐะฝะธะต

### ะะพะบัััะธะต ัะตััะฐะผะธ

ะกะพะทะดะฐะฝั 25 ัะฝะธั-ัะตััะพะฒ, ะฟะพะบััะฒะฐััะธั:

1. **ะะฐััะตั ัะตัะธะธ** (6 ัะตััะพะฒ)
   - ะัััะพะน ัะฟะธัะพะบ
   - ะะพัะปะตะดะพะฒะฐัะตะปัะฝัะต ะดะฝะธ
   - ะัะตัะฒะฐะฝะฝะฐั ัะตัะธั
   - ะะฝะพะถะตััะฒะตะฝะฝัะต ะฒะพัะฟะพะผะธะฝะฐะฝะธั ะฒ ะดะตะฝั
   - ะะตัะพััะธัะพะฒะฐะฝะฝัะต ะดะฐัั

2. **ะะฐััะตั ะพัะฒะฐัะฐ ะฒัะตะผะตะฝะธ** (5 ัะตััะพะฒ)
   - ะัััะพะน ัะฟะธัะพะบ
   - ะะดะฝะพ ะฒะพัะฟะพะผะธะฝะฐะฝะธะต
   - ะะตัะบะพะปัะบะพ ะปะตั
   - ะะดะธะฝ ะณะพะด
   - ะะพะปััะพะน ะดะธะฐะฟะฐะทะพะฝ

3. **ะญะผะพัะธะพะฝะฐะปัะฝัะน ะฑะฐะปะฐะฝั** (3 ัะตััะฐ)
   - ะะพะทะธัะธะฒะฝัะต ัะผะพัะธะธ
   - ะะตะณะฐัะธะฒะฝัะต ัะผะพัะธะธ
   - ะกะฑะฐะปะฐะฝัะธัะพะฒะฐะฝะฝัะต ัะผะพัะธะธ

4. **ะะพัะฐัะธั ะธะฝัะฐะนัะพะฒ** (2 ัะตััะฐ)
   - ะะพััะตะบัะฝะพััั ะธะฝะดะตะบัะฐ
   - ะะฐะทะฝะพะพะฑัะฐะทะธะต ะธะฝะดะตะบัะพะฒ

5. **ะะพะดััะตั ะบะพะฝัะตะฝัะฐ** (3 ัะตััะฐ)
   - ะะฑัะธะน ะฟะพะดััะตั
   - ะคะธะปัััะฐัะธั ะฟะพ ะฝะตะดะตะปะต
   - ะคะธะปัััะฐัะธั ะฟะพ ะผะตัััั

6. **ะกะธััะตะผะฐ ะฟัะธะพัะธัะตัะพะฒ** (2 ัะตััะฐ)
   - ะกะพััะธัะพะฒะบะฐ ะฟะพ ะฟัะธะพัะธัะตัั
   - ะัะพะฒะตัะบะฐ ััะพะฒะฝะตะน ะฟัะธะพัะธัะตัะฐ

7. **ะัะฐะฝะธัะฝัะต ัะปััะฐะธ** (4 ัะตััะฐ)
   - ะะดะฝะพ ะฒะพัะฟะพะผะธะฝะฐะฝะธะต
   - 1000 ะฒะพัะฟะพะผะธะฝะฐะฝะธะน
   - ะะฐัั ะฒ ะดะฐะปะตะบะพะผ ะฟัะพัะปะพะผ
   - ะะฐัั ะฒ ะฑัะดััะตะผ

### ะะฐะฟััะบ ัะตััะพะฒ

```bash
# ะขะพะปัะบะพ ัะตััั insights
flutter test test/widgets/lifeline_insights_test.dart

# ะัะต ัะฝะธั-ัะตััั
flutter test
```

### ะะตะทัะปััะฐัั

```
โ 25/25 ัะตััะพะฒ ะฟัะพัะปะธ ััะฟะตัะฝะพ
โ 133/136 ะฒัะตั ัะตััะพะฒ ะฟัะพัะปะธ ััะฟะตัะฝะพ
โ 3 ะธะฝัะตะณัะฐัะธะพะฝะฝัั ัะตััะฐ Firebase (ััะตะฑััั ัะผัะปััะพั)
```

## ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั

### ะะฟัะธะผะธะทะฐัะธะธ

1. **ะััะธัะพะฒะฐะฝะธะต ะดะฐั**: ะฃะฝะธะบะฐะปัะฝัะต ะดะฐัั ะฒััะธัะปััััั ะพะดะธะฝ ัะฐะท
2. **ะะฐะฝะฝะธะน ะฒััะพะด**: ะัะพะฒะตัะบะฐ ะฝะฐ ะฟัััะพะน ัะฟะธัะพะบ ะฒ ะฝะฐัะฐะปะต
3. **ะะตะฝะธะฒัะต ะฒััะธัะปะตะฝะธั**: ะะฝัะฐะนัั ะฒััะธัะปััััั ัะพะปัะบะพ ะฟัะธ ะพััััััะฒะธะธ ัะธะฝััะพะฝะธะทะฐัะธะธ
4. **ะะธะฝะธะผัะผ ะพะฟะตัะฐัะธะน**: ะกะพััะธัะพะฒะบะฐ ัะพะปัะบะพ ะฟัะธ ะฝะตะพะฑัะพะดะธะผะพััะธ

### ะกะปะพะถะฝะพััั

- `_calculateStreak()`: O(n log n) - ะธะท-ะทะฐ ัะพััะธัะพะฒะบะธ
- `_calculateTimelineSpan()`: O(n) - ะดะฒะฐ ะฟัะพัะพะดะฐ ะฟะพ ัะฟะธัะบั
- `_getCurrentInsight()`: O(n) - ะพะดะธะฝ ะฟัะพัะพะด ะดะปั ะฟะพะดััะตัะพะฒ

## ะคะฐะนะปั

### ะัะฝะพะฒะฝะพะน ะบะพะด

- `lib/widgets/lifeline_widget.dart` (ัััะพะบะธ 2062-2243)
  - `_calculateStreak()` - ะะฐััะตั ัะตัะธะธ
  - `_calculateTimelineSpan()` - ะะฐััะตั ะพัะฒะฐัะฐ
  - `_getCurrentInsight()` - ะะพะปััะตะฝะธะต ัะตะบััะตะณะพ ะธะฝัะฐะนัะฐ

- `lib/widgets/lifeline_widget.dart` (ัััะพะบะธ 1674-1692)
  - UI ะพัะพะฑัะฐะถะตะฝะธะต ะธะฝัะฐะนัะฐ

- `lib/widgets/lifeline_widget.dart` (ัััะพะบะธ 2495-2500)
  - ะะปะฐัั `_InsightData`

### ะะพะบะฐะปะธะทะฐัะธั

- `lib/l10n/app_en.arb` (ัััะพะบะธ 568-636)
- `lib/l10n/app_ru.arb` (ัััะพะบะธ 568-636)
- `lib/l10n/app_de.arb` (ัััะพะบะธ 568-636)
- `lib/l10n/app_fr.arb` (ัััะพะบะธ 568-636)
- `lib/l10n/app_es.arb` (ัััะพะบะธ 568-636)
- `lib/l10n/app_pt.arb` (ัััะพะบะธ 568-636)
- `lib/l10n/app_zh.arb` (ัััะพะบะธ 568-636)
- `lib/l10n/app_ar.arb` (ัััะพะบะธ 568-636)
- `lib/l10n/app_he.arb` (ัััะพะบะธ 568-636)

### ะขะตััั

- `test/widgets/lifeline_insights_test.dart` (398 ัััะพะบ, 25 ัะตััะพะฒ)

## ะัะดััะธะต ัะปัััะตะฝะธั

### ะะพะทะผะพะถะฝัะต ะดะพะฟะพะปะฝะตะฝะธั

1. **ะะตััะพะฝะฐะปะธะทะฐัะธั**: ะะฐัััะพะนะบะธ ะฟัะธะพัะธัะตัะฐ ะธะฝัะฐะนัะพะฒ
2. **ะะพะปััะต ะผะตััะธะบ**:
   - ะกัะตะดะฝัั ะดะปะธะฝะฐ ะทะฐะฟะธัะตะน
   - ะกะฐะผัะน ะฟัะพะดัะบัะธะฒะฝัะน ะผะตััั
   - ะขะพะฟ-5 ัะผะพัะธะน
3. **ะะฝะธะผะฐัะธะธ**: ะะปะฐะฒะฝะฐั ัะผะตะฝะฐ ะธะฝัะฐะนัะพะฒ
4. **ะััะพัะธั**: ะัะพัะผะพัั ะฟัะพัะปัั ะดะพััะธะถะตะฝะธะน
5. **ะฃะฒะตะดะพะผะปะตะฝะธั**: ะะฐะฟะพะผะธะฝะฐะฝะธั ะพ ัะตัะธะธ

### ะะดะตะธ ะดะปั ะณะตะนะผะธัะธะบะฐัะธะธ

- ๐ ะะพััะธะถะตะฝะธั ะทะฐ ัะตัะธะธ (7, 30, 100 ะดะฝะตะน)
- โญ ะะตะนะดะถะธ ะทะฐ ะบะพะปะธัะตััะฒะพ ะฒะพัะฟะพะผะธะฝะฐะฝะธะน
- ๐ ะัะฐัะธะบะธ ะฟัะพะณัะตััะฐ
- ๐ฏ ะะตััะพะฝะฐะปัะฝัะต ัะตะปะธ

## Changelog

### v1.0.0 (2025-10-06)

#### ะะพะฑะฐะฒะปะตะฝะพ
- โจ ะะฐััะตั ัะตัะธะธ ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝัั ะดะฝะตะน
- โจ ะะพัะฐัะธั ะธะฝัะฐะนัะพะฒ ะบะฐะถะดัะน ัะฐั
- โจ 9 ัะธะฟะพะฒ ะธะฝัะฐะนัะพะฒ ั ะฟัะธะพัะธัะตัะฐะผะธ
- โจ ะกะธััะตะผะฐ ัะผะพัะธะพะฝะฐะปัะฝะพะณะพ ะฑะฐะปะฐะฝัะฐ
- โจ ะะพะปะฝะฐั ะปะพะบะฐะปะธะทะฐัะธั ะฝะฐ 9 ัะทัะบะพะฒ
- โจ 25 ัะฝะธั-ัะตััะพะฒ ั 100% ะฟะพะบัััะธะตะผ ะปะพะณะธะบะธ

#### ะัะฟัะฐะฒะปะตะฝะพ
- ๐ ะะตัะพะดั ะฒัะฝะตัะตะฝั ะฒ ะฟัะฐะฒะธะปัะฝัะน ะบะปะฐัั `_LifelineWidgetState`
- ๐ ะะฝัะฐะนัั ะฟะพะบะฐะทัะฒะฐัััั ัะพะปัะบะพ ะบะพะณะดะฐ ะฝะตั ัะธะฝััะพะฝะธะทะฐัะธะธ

#### ะะทะผะตะฝะตะฝะพ
- โป๏ธ ะะฐะผะตะฝะตะฝ ััะฐัะธัะตัะบะธะน ัะตะบัั "Calculating..." ะฝะฐ ะดะธะฝะฐะผะธัะตัะบะธะต ะธะฝัะฐะนัั
- โป๏ธ ะฃะปัััะตะฝ UX ะณะปะฐะฒะฝะพะณะพ ะฒะธะดะถะตัะฐ

---

*ะกะพะทะดะฐะฝะพ: 2025-10-06*
*ะะฒัะพั: Claude (Anthropic)*
*ะะตััะธั: 1.0.0*
